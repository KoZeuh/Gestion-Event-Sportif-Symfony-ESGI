{% extends 'base.html.twig' %}

{% block title %}Ajouter un participant{% endblock %}

{% block javascripts %}
    {% block importmap %}{{ importmap(['app', 'participant_new']) }}{% endblock %}
{% endblock %}

{% block body %}
    <div class="container my-4">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h1 class="h5 text-center m-0">Ajouter d'un participant à <em>{{ event.name }}</em></h1>
            </div>
            <div class="card-body">
                {{ form_start(form, { attr: { class: 'needs-validation', novalidate: 'novalidate' } }) }}
                    <div class="mb-3">
                        {{ form_label(form.name, 'Nom du participant', { label_attr: { class: 'form-label' } }) }}
                        {{ form_widget(form.name, { attr: { class: 'form-control' } }) }}
                        {{ form_errors(form.name) }}
                    </div>
                    <div class="mb-3">
                        {{ form_label(form.email, 'Email du participant', { label_attr: { class: 'form-label' } }) }}
                        {{ form_widget(form.email, { attr: { class: 'form-control' } }) }}
                        {{ form_errors(form.email) }}
                    </div>
                    <div class="mb-3">
                        {{ form_label(form.longitude, 'Longitude du participant', { label_attr: { class: 'form-label' } }) }}
                        {{ form_widget(form.longitude, { attr: { class: 'form-control' } }) }}
                        {{ form_errors(form.longitude) }}
                    </div>
                    <div class="mb-3">
                        {{ form_label(form.latitude, 'Latitude du participant', { label_attr: { class: 'form-label' } }) }}
                        {{ form_widget(form.latitude, { attr: { class: 'form-control' } }) }}
                        {{ form_errors(form.latitude) }}
                    </div>
                    <div class="mb-3">
                        {{ form_label(form.event, 'Événement', { label_attr: { class: 'form-label' } }) }}
                        {{ form_widget(form.event, { attr: { class: 'form-control'} }) }}
                        {{ form_errors(form.event) }}
                    </div>

                    <div class="d-flex justify-content-around">
                        {{ form_widget(form.validate, { attr: { class: 'btn btn-success' } }) }}
                        <span class="text-center" style="display:none" id="distance"></span>
                        <button type="button" id="btn-calcul-distance" class="btn btn-primary">Calculer la distance entre le participant et l'événement</button>
                    </div>
                {{ form_end(form) }}
            </div>
        </div>

        <div class="mt-3 text-center">
            <a href="{{ path('event_view', { id: event.id }) }}" class="btn btn-secondary">
                Retour à l'événement
            </a>
        </div>
    </div>
{% endblock %}
